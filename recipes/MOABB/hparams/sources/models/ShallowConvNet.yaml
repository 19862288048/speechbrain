# MODEL
input_shape: [null, !ref <T>, !ref <C>, null]
cnn_temporal_kernels: 40 # @orion_step1: --cnn_temporal_kernels~"uniform(4, 64,discrete=True)"
cnn_spatial_kernels: !ref <cnn_temporal_kernels>
cnn_temporal_kernelsize: 13 # @orion_step1: --cnn_temporal_kernelsize~"uniform(5, 62,discrete=True)"
#cnn_poolsize: 37 # @orion_step1: --cnn_poolsize_~"uniform(4, 40,discrete=True)"
cnn_poolsize_: 10 # @orion_step1: --cnn_poolsize_~"uniform(1, 10,discrete=True)"
cnn_poolstride_factor: 5 # @orion_step1: --cnn_poolstride_factor~"uniform(1, 5,discrete=True)"
# pool size from 4/125 ms to 40/125 ms = circa 30 ms
# pool stride from 1 to pool size
cnn_poolsize: !ref <cnn_poolsize_> * 4 # same resolution as for EEGNet research space
cnn_poolstride: !apply:round
    - !ref <cnn_poolsize> / <cnn_poolstride_factor>
dropout: 0.1748  # @orion_step1: --dropout~"uniform(0.0, 0.5)"

model: !new:models.ShallowConvNet.ShallowConvNet
    input_shape: !ref <input_shape>
    cnn_temporal_kernels: !ref <cnn_temporal_kernels>
    cnn_spatial_kernels: !ref <cnn_spatial_kernels>
    cnn_temporal_kernelsize: [!ref <cnn_temporal_kernelsize>, 1]
    cnn_poolsize: [!ref <cnn_poolsize>, 1]
    cnn_poolstride: [!ref <cnn_poolstride>, 1]
    dropout: !ref <dropout>
    dense_n_neurons: !ref <n_classes>
