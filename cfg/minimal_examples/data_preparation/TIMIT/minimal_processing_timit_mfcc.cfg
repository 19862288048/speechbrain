# SpeechBrain
# Description: This configuration file copies the dataset locally, prepares it (i.e, creates the needed scp files ), 
#	       and loops over the data itemized in the scp file. Data are processed with the config file in processing_cfg. T
#              The latter computes the MFCCs of each signal.

[global]
    verbosity=2
    output_folder=exp/read_mininal_timit_mfcc
    data_file=/home/mirco/datasets/TIMIT.tar.gz
    local_data_folder=/home/mirco/datasets/TIMIT_new/TIMIT
    scp_folder=$output_folder/prepare_timit
    device=cuda
    sample_rate=16000
[/global]

[functions]

	# copy data locally
	[copy_locally]
    		class_name=data_preparation.copy_data_locally
                data_file=$data_file
		local_folder=$local_data_folder
	[/copy_locally]

	# data preparation (i.e, creation of the scp files)
	[prepare_timit]
    		class_name=data_preparation.timit_prepare
		data_folder=$local_data_folder
		splits=train,dev,test
	[/prepare_timit]
    
	    
    	[loop]
	    class_name=core.loop
	    scp=$scp_folder/train.scp
	    batch_size=4
	    sentence_sorting=ascending
	    num_workers=0
	    scp_read=wav
	    processing_cfg=cfg/features/mfcc_features.cfg
            stop_at=MFCCs
    	[/loop]


[/functions]

[computations]

    # copy the data locally:
    copy_locally()

    # prepare the timit dataset
    prepare_timit()

    # process the specified dataset	
    loop()	

[/computations]


